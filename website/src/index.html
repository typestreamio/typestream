<!doctype html>
<html lang="en" class="light" dir="ltr" data-theme="light">
  <head>
    {{> title-meta title="Home"}}
    <meta name="color-scheme" content="light">

    <!-- Css -->
    {{> head-css}}

    <style>
      /* Architecture diagram */
      .arch-diagram {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1.25rem;
        font-size: 0.9rem;
        font-weight: 600;
        color: #334155;
      }

      .dark .arch-diagram {
        color: #cbd5e1;
      }

      .arch-diagram .arch-external {
        padding: 1rem 1.5rem;
        border-radius: 0.75rem;
        background: #f1f5f9;
        border: 1px solid #e2e8f0;
        text-align: center;
        white-space: nowrap;
        flex-shrink: 0;
      }

      .dark .arch-diagram .arch-external {
        background: #1e293b;
        border-color: #334155;
      }

      .arch-diagram .arch-external small {
        display: block;
        font-weight: 400;
        font-size: 0.7rem;
        opacity: 0.7;
        margin-top: 0.25rem;
      }

      .arch-diagram .arch-arrow {
        color: #94a3b8;
        font-size: 1.25rem;
        flex-shrink: 0;
      }

      /* TypeStream bounding box */
      .ts-box {
        position: relative;
        border: 2px solid #6366f1;
        border-radius: 1rem;
        padding: 3.5rem 1.5rem 1.5rem;
        background: rgba(99, 102, 241, 0.03);
        flex: 1;
        min-width: 0;
      }

      .dark .ts-box {
        background: rgba(99, 102, 241, 0.06);
        border-color: #818cf8;
      }

      .ts-box-label {
        position: absolute;
        top: -0.8rem;
        left: 1.25rem;
        background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
        color: white;
        padding: 0.25rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.85rem;
        font-weight: 700;
        letter-spacing: 0.02em;
      }

      /* GUI/Orchestration layer on top */
      .ts-gui-layer {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        padding: 0.625rem 1rem;
        background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
        border-radius: 0.625rem;
        color: white;
        font-size: 0.8rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
      }

      .ts-gui-layer svg {
        flex-shrink: 0;
      }

      .ts-gui-layer small {
        font-weight: 400;
        opacity: 0.8;
      }

      /* Internal components row */
      .ts-internals {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .ts-internals .ts-component {
        padding: 0.625rem 1rem;
        border-radius: 0.5rem;
        background: white;
        border: 1px solid #c7d2fe;
        text-align: center;
        font-size: 0.8rem;
        white-space: nowrap;
      }

      .dark .ts-internals .ts-component {
        background: #1e293b;
        border-color: #4338ca;
      }

      .ts-internals .ts-component small {
        display: block;
        font-weight: 400;
        font-size: 0.65rem;
        opacity: 0.6;
        margin-top: 0.125rem;
      }

      .ts-internals .ts-int-arrow {
        color: #a5b4fc;
        font-size: 1rem;
        flex-shrink: 0;
      }

      /* Responsive: stack on mobile */
      @media (max-width: 768px) {
        .arch-diagram {
          flex-direction: column;
          gap: 0.75rem;
        }

        .arch-diagram .arch-arrow {
          transform: rotate(90deg);
        }

        .ts-internals {
          flex-direction: column;
          gap: 0.5rem;
        }

        .ts-internals .ts-int-arrow {
          transform: rotate(90deg);
        }
      }

      /* Node grid */
      .node-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1rem;
      }

      .node-card {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        padding: 1rem 1.25rem;
        background: #ffffff;
        border: 1px solid #e2e8f0;
        border-radius: 0.75rem;
        transition: border-color 0.2s ease;
      }

      .node-card:hover {
        border-color: #6366f1;
      }

      .dark .node-card {
        background: #1e293b;
        border-color: #334155;
      }

      .dark .node-card:hover {
        border-color: #6366f1;
      }

      .node-card .node-icon {
        flex-shrink: 0;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 0.5rem;
        background: #eef2ff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
      }

      .dark .node-card .node-icon {
        background: #312e81;
      }

      .node-card .node-name {
        font-weight: 600;
        font-size: 0.9rem;
        color: #0f172a;
      }

      .dark .node-card .node-name {
        color: #f1f5f9;
      }

      .node-card .node-desc {
        font-size: 0.8rem;
        color: #64748b;
        line-height: 1.5;
        margin-top: 0.25rem;
      }

      .dark .node-card .node-desc {
        color: #94a3b8;
      }

      /* Section divider */
      .section-divider {
        border: none;
        border-top: 1px solid #e2e8f0;
        margin: 0;
      }

      .dark .section-divider {
        border-top-color: #1e293b;
      }
    </style>

    <!-- Privacy-friendly analytics by Plausible -->
    <script async src="https://plausible.io/js/pa-r1Qysb4RPmjfl1H8IeZFS.js"></script>
    <script>
      window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
      plausible.init()
    </script>
  </head>

  <body class="font-nunito text-base text-black dark:text-white dark:bg-slate-900">
    {{> navbar/nav-center}}

    <!-- ============================================ -->
    <!-- HERO -->
    <!-- ============================================ -->
    <section class="relative overflow-hidden pt-36 pb-20 lg:pt-44 lg:pb-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto text-center">
          <h1
            class="text-4xl lg:text-6xl font-bold text-slate-900 dark:text-white mb-6 leading-tight"
          >
            Your database changes.<br />
            Your search, your cache, your APIs &mdash;<br />
            <span class="text-indigo-600 dark:text-indigo-400"
              >all updated. Instantly.</span
            >
          </h1>

          <p
            class="text-lg lg:text-xl text-slate-600 dark:text-slate-400 leading-relaxed mb-10 max-w-2xl mx-auto"
          >
            TypeStream connects to your Postgres or MySQL and turns every
            insert, update, and delete into a real-time pipeline you build
            visually. Keep search in sync, serve live APIs, feed AI models
            &mdash; no cron jobs, no background workers, no glue code.
            Deploy with Docker Compose or Helm.
          </p>

          <div class="flex flex-col sm:flex-row gap-4 justify-center mb-4">
            <a
              href="mailto:hello@typestream.io"
              class="px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition-colors"
            >
              Let's talk
            </a>
            <a
              href="https://demo.typestream.io/jobs/new"
              class="px-8 py-4 bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-semibold rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-600 dark:hover:border-indigo-600 transition-colors"
            >
              Try the live demo
            </a>
          </div>
          <div class="flex justify-center mb-10">
            <a
              href="https://github.com/typestreamio/typestream"
              class="text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"
            >
              or view on GitHub &rarr;
            </a>
          </div>

          <video
            autoplay
            muted
            loop
            playsinline
            class="w-full rounded-xl border border-slate-200 dark:border-slate-700"
          >
            <source src="assets/images/hero-demo.webm" type="video/webm" />
            <source src="assets/images/hero-demo.mp4" type="video/mp4" />
          </video>
        </div>
      </div>
    </section>

    <hr class="section-divider" />

    <!-- ============================================ -->
    <!-- HOW IT WORKS -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto text-center mb-12">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-4"
          >
            You draw pipelines. We handle the plumbing.
          </h2>
        </div>

        <!-- Architecture diagram -->
        <div class="max-w-5xl mx-auto mb-10">
          <div class="arch-diagram">
            <!-- Your Database (external) -->
            <div class="arch-external">
              Your Database
              <small>Postgres / MySQL</small>
            </div>

            <span class="arch-arrow">&rarr;</span>

            <!-- TypeStream bounding box -->
            <div class="ts-box">
              <span class="ts-box-label">TypeStream</span>

              <!-- GUI / Orchestration layer -->
              <div class="ts-gui-layer">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/>
                </svg>
                Visual Pipeline Builder
                <small>&mdash; you work here</small>
              </div>

              <!-- Internal components -->
              <div class="ts-internals">
                <div class="ts-component">
                  Debezium
                  <small>CDC capture</small>
                </div>
                <span class="ts-int-arrow">&rarr;</span>
                <div class="ts-component">
                  Kafka
                  <small>event streaming</small>
                </div>
                <span class="ts-int-arrow">&rarr;</span>
                <div class="ts-component">
                  Kafka Streams
                  <small>your transforms</small>
                </div>
                <span class="ts-int-arrow">&rarr;</span>
                <div class="ts-component">
                  Kafka Connect
                  <small>sink connectors</small>
                </div>
              </div>
            </div>

            <span class="arch-arrow">&rarr;</span>

            <!-- Your Destinations (external) -->
            <div class="arch-external">
              Your Destinations
              <small>Postgres, ES, Weaviate&hellip;</small>
            </div>
          </div>
        </div>

        <div class="max-w-3xl mx-auto">
          <p
            class="text-center text-slate-600 dark:text-slate-400 leading-relaxed mb-8"
          >
            TypeStream packages Debezium, Kafka, and Kafka Connect &mdash;
            the industry-standard open source stack for streaming. You
            connect your database, build pipelines visually, and deploy. No
            Kafka clusters to provision. No connectors to configure. No
            Debezium to operate.
          </p>

          <div class="grid sm:grid-cols-2 gap-6 text-sm text-slate-500 dark:text-slate-400">
            <div>
              <strong class="text-slate-700 dark:text-slate-300"
                >Debezium</strong
              >
              listens to your database's change log and emits every row change
              as an event.
            </div>
            <div>
              <strong class="text-slate-700 dark:text-slate-300">Kafka</strong>
              durably stores and delivers those events at any scale.
            </div>
            <div>
              <strong class="text-slate-700 dark:text-slate-300"
                >Kafka Connect</strong
              >
              pushes data to any destination through hundreds of pre-built
              connectors.
            </div>
            <div>
              <strong class="text-slate-700 dark:text-slate-300"
                >TypeStream</strong
              >
              is where you work &mdash; your visual transformations compile to
              efficient stream processing applications.
            </div>
          </div>
        </div>
      </div>
    </section>

    <hr class="section-divider" />

    <!-- ============================================ -->
    <!-- ANCHOR EXAMPLE: SEARCH SYNC -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-6"
          >
            Keep your search index in sync &mdash; automatically
          </h2>

          <div class="mb-8">
            <h3
              class="text-sm font-bold uppercase tracking-wider text-red-500 dark:text-red-400 mb-2"
            >
              The problem
            </h3>
            <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
              Your product data lives in Postgres. Your search lives in
              Elasticsearch. The sync between them is a cron job, a background
              worker, or a reindex script someone wrote two years ago. Search
              results are stale. Full reindexes hammer production. The sync
              breaks when someone adds a column. Every engineer who's worked at
              a company with search has this story.
            </p>
          </div>

          <div class="mb-8">
            <h3
              class="text-sm font-bold uppercase tracking-wider text-emerald-500 dark:text-emerald-400 mb-2"
            >
              The pipeline
            </h3>
            <!-- ReactFlow Pipeline Diagram -->
            <div id="flow-search-sync" class="mb-4" style="height: 160px;"></div>
            <p
              class="text-slate-600 dark:text-slate-400 leading-relaxed mt-4"
            >
              A row changes in Postgres. The text extraction node pulls
              searchable content. Elasticsearch updates within seconds. Always
              in sync. No application code. No reindex jobs.
            </p>
          </div>

          <p
            class="text-lg font-medium text-indigo-600 dark:text-indigo-400 border-l-4 border-indigo-600 dark:border-indigo-400 pl-4"
          >
            That's a three-node pipeline. Now watch what happens when you add
            one more.
          </p>
        </div>
      </div>
    </section>

    <hr class="section-divider" />

    <!-- ============================================ -->
    <!-- THE UPGRADE: ADD AI ENRICHMENT -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-6"
          >
            Now add semantic search &mdash; one more node
          </h2>

          <!-- ReactFlow Pipeline Diagram -->
          <div id="flow-semantic-search" class="mb-6" style="height: 200px;"></div>

          <p class="text-slate-600 dark:text-slate-400 leading-relaxed mb-6">
            Same CDC source. Now feeding both keyword search and semantic
            search. Both always in sync with production. The embedding node
            generates vectors using your model of choice. The Weaviate sink
            keeps your vector database current.
          </p>

          <div
            class="p-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700"
          >
            <h3
              class="text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2"
            >
              What this replaces
            </h3>
            <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
              "Add search that understands what users mean" usually means:
              provision a vector database, build an embedding pipeline, write a
              sync layer, and keep it all in sync with production. That's a
              quarter of engineering work. With TypeStream, it's a branch in
              your pipeline.
            </p>
          </div>
        </div>
      </div>
    </section>

    <hr class="section-divider" />

    <!-- ============================================ -->
    <!-- ANCHOR EXAMPLE: MATERIALIZED API -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-6"
          >
            Turn high-throughput data into a materialized API
          </h2>

          <div class="mb-8">
            <h3
              class="text-sm font-bold uppercase tracking-wider text-red-500 dark:text-red-400 mb-2"
            >
              The problem
            </h3>
            <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
              Your data changes constantly &mdash; rows updating in your
              database, webhooks firing from external services, events streaming
              from third-party APIs. You need a fast endpoint that always
              returns the latest state. The usual answer: build a database, an
              API server, upsert logic, a cache layer, and invalidation code.
              That's a lot of plumbing for what should be simple: keep the
              latest value, serve it on demand.
            </p>
          </div>

          <div class="mb-8">
            <h3
              class="text-sm font-bold uppercase tracking-wider text-emerald-500 dark:text-emerald-400 mb-2"
            >
              The pipeline
            </h3>
            <video
              autoplay
              muted
              loop
              playsinline
              class="w-full rounded-xl border border-slate-200 dark:border-slate-700 mb-4"
            >
              <source src="assets/images/crypto-demo.webm" type="video/webm" />
              <source src="assets/images/crypto-demo.mp4" type="video/mp4" />
            </video>
            <p
              class="text-slate-600 dark:text-slate-400 leading-relaxed mt-4"
            >
              Here, crypto prices stream in from Coinbase. A materialized view
              keeps the latest value per trading pair. A gRPC endpoint serves it
              instantly. No database. No cache. No API server. The same pattern
              works for any high-throughput source &mdash; CDC from your
              Postgres, IoT telemetry, payment events &mdash; anything where
              you need a fast read API over data that never stops changing.
            </p>
          </div>

          <div
            class="p-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700"
          >
            <h3
              class="text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2"
            >
              What this replaces
            </h3>
            <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
              A webhook handler or polling job, a Postgres table, upsert logic,
              an Express or FastAPI server, maybe Redis for caching, and
              invalidation code to keep it all consistent. With TypeStream, the
              pipeline <em>is</em> the API.
            </p>
          </div>
        </div>
      </div>
    </section>

    <hr class="section-divider" />

    <!-- ============================================ -->
    <!-- WHAT ELSE YOU CAN BUILD -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto text-center mb-16">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-4"
          >
            Your pipeline is also your API.
          </h2>
          <p
            class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed max-w-2xl mx-auto"
          >
            Most streaming tools push data to a database. Then you build an API
            on top. TypeStream's materialized views skip that step entirely
            &mdash; your pipeline computes the result, and a gRPC endpoint
            serves it directly. Query your streaming data like it's a database,
            without running one.
          </p>
        </div>

        <div class="max-w-4xl mx-auto space-y-20">
          <!-- Live API from database changes -->
          <div>
            <h3
              class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
            >
              Live API from database changes
            </h3>
            <p
              class="text-slate-600 dark:text-slate-400 leading-relaxed mb-6"
            >
              Your product catalog changes in Postgres. Normally you'd build an
              API server, a cache layer, and invalidation logic. With
              TypeStream, a materialized view keyed on <code>product_id</code>
              gives you an instant gRPC endpoint with the latest state of every
              row. No API server. No cache invalidation. No Redis.
            </p>
            <!-- ReactFlow Pipeline Diagram -->
            <div id="flow-live-api" style="height: 160px;"></div>
            <div
              class="mt-6 p-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700"
            >
              <h4
                class="text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2"
              >
                Same pattern, different data
              </h4>
              <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
                Latest order status per order. Current inventory per SKU.
                Live crypto prices per trading pair. Any time you need a fast
                read API over data that changes, it's a one-node pipeline.
              </p>
            </div>
          </div>

          <!-- Quota / rate-limit tracking -->
          <div>
            <h3
              class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
            >
              Quota tracking in real time
            </h3>
            <p
              class="text-slate-600 dark:text-slate-400 leading-relaxed mb-6"
            >
              Count API calls per customer in a sliding window. Query the
              result with a single gRPC call: &ldquo;Has this customer exceeded
              100 requests this minute?&rdquo; No rate-limiting middleware to
              build. No Redis counters to manage. The pipeline maintains the
              count. The endpoint serves it.
            </p>
            <!-- ReactFlow Pipeline Diagram -->
            <div id="flow-quota-tracking" style="height: 160px;"></div>
          </div>

          <!-- Visits by country -->
          <div>
            <h3
              class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
            >
              Live visits by country
            </h3>
            <p
              class="text-slate-600 dark:text-slate-400 leading-relaxed mb-6"
            >
              Enrich page-view events with GeoIP, count them per country in a
              rolling window, and query the result through the auto-generated
              endpoint. You just built a real-time analytics backend without
              Prometheus, a time-series database, or a single line of
              application code.
            </p>
            <!-- ReactFlow Pipeline Diagram -->
            <div id="flow-visits-country" style="height: 160px;"></div>
          </div>

          <!-- Perfect database replicas -->
          <div>
            <h3
              class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
            >
              Perfect database replicas
            </h3>
            <p
              class="text-slate-600 dark:text-slate-400 leading-relaxed mb-6"
            >
              Replicate your data to 200+ destinations supported by Kafka
              Connect &mdash; Postgres, MySQL, ClickHouse, and more.
              Optionally filtered and reshaped in flight, all with millisecond
              latency.
            </p>
            <!-- ReactFlow Pipeline Diagram -->
            <div id="flow-database-replica" style="height: 160px;"></div>
          </div>

          <!-- AI classification in-flight -->
          <div>
            <h3
              class="text-2xl font-bold text-slate-900 dark:text-white mb-4"
            >
              AI classification in-flight
            </h3>
            <p
              class="text-slate-600 dark:text-slate-400 leading-relaxed mb-6"
            >
              Enrich every row with an OpenAI prompt as it flows through your
              pipeline. Auto-tag support tickets by urgency, classify inbound
              leads, categorize content, or extract entities. Your data arrives
              enriched and ready, not raw and waiting for a batch job.
            </p>
            <!-- ReactFlow Pipeline Diagram -->
            <div id="flow-ai-classification" style="height: 160px;"></div>
          </div>
        </div>
      </div>
    </section>

    <hr class="section-divider" />

    <!-- ============================================ -->
    <!-- AVAILABLE NODES -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28 bg-slate-50 dark:bg-slate-800/30">
      <div class="container relative">
        <div class="max-w-3xl mx-auto text-center mb-12">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-4"
          >
            What's in the toolbox
          </h2>
        </div>

        <div class="max-w-5xl mx-auto space-y-12">
          <!-- Sources -->
          <div>
            <h3 class="text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-4">Sources</h3>
            <div class="node-grid">
              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Kafka Topic</div>
                  <div class="node-desc">
                    Connect to any Kafka topic directly. Read typed events from your existing streams.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Database Table</div>
                  <div class="node-desc">
                    Connect to your Postgres or MySQL via CDC. Unwraps Debezium change events into clean row data.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Transforms -->
          <div>
            <h3 class="text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-4">Transforms</h3>
            <div class="node-grid">
              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Filter</div>
                  <div class="node-desc">
                    Pass through only the events that match a condition on any string key.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">OpenAI Transformer</div>
                  <div class="node-desc">
                    Classify, summarize, score, or extract with a prompt. Attach any OpenAI model to your stream.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Embedding Generator</div>
                  <div class="node-desc">
                    Generate vector embeddings for any text field. Feed downstream vector databases.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Text Extractor</div>
                  <div class="node-desc">
                    Pull searchable text content from document fields. Prepare data for search indexing.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">GeoIP Node</div>
                  <div class="node-desc">
                    Convert IP addresses to country, city, and region. Every event arrives geo-tagged.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Count / WindowedCount / Group</div>
                  <div class="node-desc">
                    Compute real-time aggregations &mdash; events per minute, rolling counts, grouped metrics.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Materialized View</div>
                  <div class="node-desc">
                    Auto-generates a gRPC endpoint from windowed aggregations. Query your streaming data directly.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Sinks -->
          <div>
            <h3 class="text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-4">Sinks</h3>
            <div class="node-grid">
              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Database Sink</div>
                  <div class="node-desc">
                    Write to Postgres, MySQL, Elasticsearch, Weaviate, and 200+ other destinations via Kafka Connect.
                  </div>
                </div>
              </div>

              <div class="node-card">
                <div class="node-icon">
                  <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                  </svg>
                </div>
                <div>
                  <div class="node-name">Kafka Topic Sink</div>
                  <div class="node-desc">
                    Publish transformed events back to a Kafka topic for downstream consumers.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================================ -->
    <!-- PRODUCTION-READY -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto text-center mb-12">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-4"
          >
            Built for production, not just demos
          </h2>
        </div>

        <div class="max-w-4xl mx-auto grid md:grid-cols-3 gap-8">
          <!-- Backpressure and retries -->
          <div>
            <div
              class="w-12 h-12 rounded-xl bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-indigo-600 dark:text-indigo-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 10V3L4 14h7v7l9-11h-7z"
                />
              </svg>
            </div>
            <h3
              class="text-lg font-semibold text-slate-900 dark:text-white mb-2"
            >
              Backpressure and retries
            </h3>
            <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
              OpenAI returns a 429. A destination goes temporarily unavailable.
              TypeStream handles rate limiting, exponential backoff, and
              queueing automatically. Your pipeline adapts. You don't get paged.
            </p>
          </div>

          <!-- Pipelines are code -->
          <div>
            <div
              class="w-12 h-12 rounded-xl bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-indigo-600 dark:text-indigo-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"
                />
              </svg>
            </div>
            <h3
              class="text-lg font-semibold text-slate-900 dark:text-white mb-2"
            >
              Pipelines are code
            </h3>
            <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
              Your pipelines are stored as code. Version control them. Review
              changes in pull requests. Deploy through your CI/CD pipeline. No
              clicking through a UI in production.
            </p>
          </div>

          <!-- Observability included -->
          <div>
            <div
              class="w-12 h-12 rounded-xl bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-indigo-600 dark:text-indigo-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                />
              </svg>
            </div>
            <h3
              class="text-lg font-semibold text-slate-900 dark:text-white mb-2"
            >
              Observability included
            </h3>
            <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
              See what's flowing, what's stuck, and why. Metrics, logs, and
              traces are built in. When something goes wrong, you know where to
              look.
            </p>
          </div>
        </div>
      </div>
    </section>

    <hr class="section-divider" />

    <!-- ============================================ -->
    <!-- SELF-HOSTED -->
    <!-- ============================================ -->
    <section class="py-20 lg:py-28">
      <div class="container relative">
        <div class="max-w-3xl mx-auto text-center mb-12">
          <h2
            class="text-3xl lg:text-4xl font-bold text-slate-900 dark:text-white mb-4"
          >
            Your VPC. Your data. Your control.
          </h2>
        </div>

        <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
          <!-- Self-hosted -->
          <div>
            <div
              class="w-12 h-12 rounded-xl bg-green-100 dark:bg-green-900/50 flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-green-600 dark:text-green-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"
                />
              </svg>
            </div>
            <h3
              class="text-lg font-semibold text-slate-900 dark:text-white mb-2"
            >
              Self-hosted, your data stays put
            </h3>
            <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
              Deploy with a single <code>docker compose up</code> or a Helm
              chart to your Kubernetes cluster. Your data never leaves your
              environment. No third-party processing. Meet compliance
              requirements by default.
            </p>
          </div>

          <!-- Source available -->
          <div>
            <div
              class="w-12 h-12 rounded-xl bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-purple-600 dark:text-purple-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"
                />
              </svg>
            </div>
            <h3
              class="text-lg font-semibold text-slate-900 dark:text-white mb-2"
            >
              Source available (BSL)
            </h3>
            <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
              Inspect every line of code. No black boxes. The Business Source
              License lets you use TypeStream freely for internal use &mdash;
              and converts to full open source after each release. No vendor
              lock-in.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================================ -->
    <!-- BOTTOM CTA -->
    <!-- ============================================ -->
    <section
      class="py-20 lg:py-28"
      style="background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)"
    >
      <div class="container relative">
        <div class="max-w-2xl mx-auto text-center">
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-4">
            See it in action. Tell us what you'd build.
          </h2>
          <p class="text-indigo-100 text-lg mb-10 leading-relaxed">
            Try the live demo, explore the repo, or tell us about your use
            case. We're building TypeStream for teams like yours and your
            feedback shapes what we build next.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center mb-4">
            <a
              href="mailto:hello@typestream.io"
              class="px-8 py-4 bg-white text-indigo-700 font-semibold rounded-xl hover:bg-indigo-50 transition-colors"
            >
              Talk to us
            </a>
            <a
              href="https://demo.typestream.io/jobs/new"
              class="px-8 py-4 bg-indigo-400/30 text-white font-semibold rounded-xl border border-white/20 hover:bg-indigo-400/50 transition-colors"
            >
              Try the live demo
            </a>
          </div>
          <a
            href="https://github.com/typestreamio/typestream"
            class="text-sm text-indigo-200 hover:text-white transition-colors"
          >
            or view on GitHub &rarr;
          </a>
        </div>
      </div>
    </section>

    {{> footer/footer}}

    {{> script-file}}

    <!-- React & ReactFlow via CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/reactflow@11.11.4/dist/umd/index.js" crossorigin></script>
    <link href="https://unpkg.com/reactflow@11.11.4/dist/style.css" rel="stylesheet" />

    <!-- ReactFlow Pipeline Components -->
    <script>
      // ReactFlow v11 UMD exposes on window.ReactFlow
      const { ReactFlow, Background, useNodesState, useEdgesState, Handle, Position } = window.ReactFlowModule || window.reactflow || window.ReactFlow || {};

      // Custom Node Component for pipeline nodes
      function PipelineNode({ data }) {
        const nodeStyle = {
          background: data.error ? 'white' : 'white',
          border: data.error ? '2px solid #ef4444' : '1px solid #e2e8f0',
          borderRadius: '12px',
          padding: '14px 20px',
          minWidth: '160px',
          boxShadow: data.error ? '0 0 12px rgba(239, 68, 68, 0.3)' : '0 4px 12px rgba(0,0,0,0.1)',
        };

        const headerStyle = {
          display: 'flex',
          alignItems: 'center',
          gap: '10px',
          marginBottom: '4px',
        };

        const iconStyle = {
          width: '24px',
          height: '24px',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          fontSize: '16px',
        };

        const titleStyle = {
          fontWeight: '600',
          fontSize: '14px',
          color: data.error ? '#ef4444' : '#1e293b',
        };

        const descStyle = {
          fontSize: '11px',
          color: '#64748b',
          marginTop: '4px',
        };

        const handleColor = data.error ? '#ef4444' : '#6366f1';

        return React.createElement('div', { style: nodeStyle },
          React.createElement(Handle, {
            type: 'target',
            position: Position.Left,
            style: { background: handleColor, width: 8, height: 8 }
          }),
          React.createElement('div', { style: headerStyle },
            React.createElement('span', { style: iconStyle }, data.icon || 'üì¶'),
            React.createElement('span', { style: titleStyle }, data.label)
          ),
          data.description && React.createElement('div', { style: descStyle }, data.description),
          React.createElement(Handle, {
            type: 'source',
            position: Position.Right,
            style: { background: handleColor, width: 8, height: 8 }
          })
        );
      }

      const nodeTypes = {
        pipeline: PipelineNode,
      };

      // Pipeline Flow Component
      function PipelineFlow({ nodes: initialNodes, edges: initialEdges, height = 180 }) {
        const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);
        const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);

        return React.createElement('div', { style: { height: height + 'px', background: '#f8fafc', borderRadius: '12px', border: '1px solid #e2e8f0' } },
          React.createElement(ReactFlow, {
            nodes: nodes,
            edges: edges,
            onNodesChange: onNodesChange,
            onEdgesChange: onEdgesChange,
            nodeTypes: nodeTypes,
            fitView: true,
            fitViewOptions: { padding: 0.2 },
            proOptions: { hideAttribution: true },
            nodesDraggable: false,
            nodesConnectable: false,
            elementsSelectable: false,
            panOnDrag: false,
            zoomOnScroll: false,
            zoomOnPinch: false,
            zoomOnDoubleClick: false,
            defaultEdgeOptions: { type: 'smoothstep', animated: true },
          },
            React.createElement(Background, { variant: 'dots', gap: 16, size: 1, color: '#cbd5e1' })
          )
        );
      }

      // Define pipeline configurations (no group boxes, just nodes)
      const pipelines = {
        // Search Sync: Postgres CDC ‚Üí Text Extraction ‚Üí Elasticsearch
        'search-sync': {
          height: 160,
          nodes: [
            { id: '1', type: 'pipeline', position: { x: 0, y: 40 }, data: { icon: 'üêò', label: 'Postgres CDC', description: 'Products table' } },
            { id: '2', type: 'pipeline', position: { x: 220, y: 40 }, data: { icon: 'üìù', label: 'Text Extract', description: 'Pull content' } },
            { id: '3', type: 'pipeline', position: { x: 440, y: 40 }, data: { icon: 'üîç', label: 'Elasticsearch', description: 'Always in sync' } },
          ],
          edges: [
            { id: 'e1-2', source: '1', target: '2', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2-3', source: '2', target: '3', type: 'smoothstep', animated: true, style: { stroke: '#10b981', strokeWidth: 2 } },
          ]
        },

        // Semantic Search: CDC ‚Üí Text + Embedding branches
        'semantic-search': {
          height: 200,
          nodes: [
            { id: '1', type: 'pipeline', position: { x: 0, y: 55 }, data: { icon: 'üêò', label: 'Postgres CDC', description: 'Products table' } },
            { id: '2a', type: 'pipeline', position: { x: 220, y: 0 }, data: { icon: 'üìù', label: 'Text Extract', description: 'Keywords' } },
            { id: '2b', type: 'pipeline', position: { x: 220, y: 110 }, data: { icon: 'üîÆ', label: 'Embedding', description: 'Vectors' } },
            { id: '3a', type: 'pipeline', position: { x: 440, y: 0 }, data: { icon: 'üîç', label: 'Elasticsearch', description: 'Keyword search' } },
            { id: '3b', type: 'pipeline', position: { x: 440, y: 110 }, data: { icon: 'üß†', label: 'Weaviate', description: 'Semantic search' } },
          ],
          edges: [
            { id: 'e1-2a', source: '1', target: '2a', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e1-2b', source: '1', target: '2b', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2a-3a', source: '2a', target: '3a', type: 'smoothstep', animated: true, style: { stroke: '#eab308', strokeWidth: 2 } },
            { id: 'e2b-3b', source: '2b', target: '3b', type: 'smoothstep', animated: true, style: { stroke: '#8b5cf6', strokeWidth: 2 } },
          ]
        },

        // Live API: CDC ‚Üí Materialized View ‚Üí gRPC
        'live-api': {
          height: 160,
          nodes: [
            { id: '1', type: 'pipeline', position: { x: 0, y: 40 }, data: { icon: 'üêò', label: 'Postgres CDC', description: 'Products table' } },
            { id: '2', type: 'pipeline', position: { x: 220, y: 40 }, data: { icon: 'üíæ', label: 'Materialize', description: 'key: product_id' } },
            { id: '3', type: 'pipeline', position: { x: 440, y: 40 }, data: { icon: 'üåê', label: 'gRPC Endpoint', description: '/products/{id}' } },
          ],
          edges: [
            { id: 'e1-2', source: '1', target: '2', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2-3', source: '2', target: '3', type: 'smoothstep', animated: true, style: { stroke: '#10b981', strokeWidth: 2 } },
          ]
        },

        // Quota Tracking: Kafka ‚Üí Windowed Count ‚Üí gRPC
        'quota-tracking': {
          height: 160,
          nodes: [
            { id: '1', type: 'pipeline', position: { x: 0, y: 40 }, data: { icon: 'üìä', label: 'API Events', description: 'Kafka topic' } },
            { id: '2', type: 'pipeline', position: { x: 220, y: 40 }, data: { icon: '‚è±Ô∏è', label: 'Windowed Count', description: '60s window' } },
            { id: '3', type: 'pipeline', position: { x: 440, y: 40 }, data: { icon: 'üåê', label: 'gRPC Endpoint', description: '/quota/{customer}' } },
          ],
          edges: [
            { id: 'e1-2', source: '1', target: '2', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2-3', source: '2', target: '3', type: 'smoothstep', animated: true, style: { stroke: '#f59e0b', strokeWidth: 2 } },
          ]
        },

        // Visits by Country: Page Views ‚Üí GeoIP ‚Üí Count ‚Üí gRPC
        'visits-country': {
          height: 160,
          nodes: [
            { id: '1', type: 'pipeline', position: { x: 0, y: 40 }, data: { icon: 'üëÅÔ∏è', label: 'Page Views', description: 'Kafka topic' } },
            { id: '2a', type: 'pipeline', position: { x: 180, y: 40 }, data: { icon: 'üåç', label: 'GeoIP', description: 'ip ‚Üí country' } },
            { id: '2b', type: 'pipeline', position: { x: 360, y: 40 }, data: { icon: 'üìä', label: 'Count', description: 'by country' } },
            { id: '3', type: 'pipeline', position: { x: 540, y: 40 }, data: { icon: 'üåê', label: 'gRPC', description: '/visits' } },
          ],
          edges: [
            { id: 'e1-2a', source: '1', target: '2a', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2a-2b', source: '2a', target: '2b', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2b-3', source: '2b', target: '3', type: 'smoothstep', animated: true, style: { stroke: '#06b6d4', strokeWidth: 2 } },
          ]
        },

        // Database Replica: Postgres ‚Üí Filter ‚Üí Destination
        'database-replica': {
          height: 160,
          nodes: [
            { id: '1', type: 'pipeline', position: { x: 0, y: 40 }, data: { icon: 'üêò', label: 'Postgres', description: 'CDC stream' } },
            { id: '2', type: 'pipeline', position: { x: 220, y: 40 }, data: { icon: 'üîç', label: 'Filter', description: 'status = active' } },
            { id: '3', type: 'pipeline', position: { x: 440, y: 40 }, data: { icon: 'üìä', label: 'ClickHouse', description: 'Analytics' } },
          ],
          edges: [
            { id: 'e1-2', source: '1', target: '2', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2-3', source: '2', target: '3', type: 'smoothstep', animated: true, style: { stroke: '#22c55e', strokeWidth: 2 } },
          ]
        },

        // AI Classification: CDC ‚Üí OpenAI ‚Üí Destination
        'ai-classification': {
          height: 160,
          nodes: [
            { id: '1', type: 'pipeline', position: { x: 0, y: 40 }, data: { icon: 'üé´', label: 'Tickets', description: 'CDC stream' } },
            { id: '2', type: 'pipeline', position: { x: 220, y: 40 }, data: { icon: 'ü§ñ', label: 'OpenAI', description: 'Classify urgency' } },
            { id: '3', type: 'pipeline', position: { x: 440, y: 40 }, data: { icon: 'üìä', label: 'Warehouse', description: 'Pre-tagged' } },
          ],
          edges: [
            { id: 'e1-2', source: '1', target: '2', type: 'smoothstep', animated: true, style: { stroke: '#6366f1', strokeWidth: 2 } },
            { id: 'e2-3', source: '2', target: '3', type: 'smoothstep', animated: true, style: { stroke: '#ec4899', strokeWidth: 2 } },
          ]
        },
      };

      // Mount ReactFlow components after DOM loads
      document.addEventListener('DOMContentLoaded', function() {
        Object.keys(pipelines).forEach(id => {
          const container = document.getElementById('flow-' + id);
          if (container) {
            const config = pipelines[id];
            const root = ReactDOM.createRoot(container);
            root.render(React.createElement(PipelineFlow, {
              nodes: config.nodes,
              edges: config.edges,
              height: config.height || 200,
            }));
          }
        });
      });
    </script>
  </body>
</html>
